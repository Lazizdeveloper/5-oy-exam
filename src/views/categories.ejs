<%- include('layouts/main', { body: undefined }) %>
<div class="card p-4 shadow-lg animate__animated animate__zoomIn">
  <h2 class="card-title text-center"><i class="fas fa-list"></i> Kategoriyalar</h2>
  <% if (error) { %>
    <div class="alert alert-danger animate__animated animate__shakeX"><%= error %></div>
  <% } %>
  <ul class="list-group mt-3">
    <% categories.forEach(category => { %>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <%= category.name %>
        <% if (isAdmin) { %>
          <div>
            <form action="/categories/<%= category._id %>/edit" method="POST" style="display:inline;">
              <input type="text" name="name" value="<%= category.name %>" class="form-control d-inline-block w-50">
              <button type="submit" class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></button>
            </form>
            <form action="/categories/<%= category._id %>/delete" method="POST" style="display:inline;" onsubmit="return confirm('O\'chirishni tasdiqlaysizmi?');">
              <button type="submit" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
            </form>
          </div>
        <% } %>
      </li>
    <% }) %>
  </ul>
  <% if (isAdmin) { %>
    <form action="/categories" method="POST" class="mt-3" id="categoryForm">
      <div class="mb-3">
        <label for="name" class="form-label">Yangi kategoriya</label>
        <input type="text" class="form-control" name="name" placeholder="Kategoriya nomi" required>
      </div>
      <button type="submit" class="btn btn-primary w-100"><i class="fas fa-plus"></i> Qo'shish</button>
    </form>
  <% } %>
</div>